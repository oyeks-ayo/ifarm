{% extends 'users/home.html' %}

{% block title %}
<title>User Checkout - Hand of God</title>
{% endblock %}


{% block style %}
<style>
   input, td, th {
        text-align: center !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="my-5">
    {% set messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} 
                    alert-dismissible fade show mx-5" role="alert">
              {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
  
    {% endif %}
  </div>
<form action= "{{url_for('insert_order')}}" method="post">
    <input type="hidden" name="csrf_token" value="{{csrf_token()}}">
    <table class="table table-dark">
        <thead>
            <tr>
                <th>S/N</th><th>Product Name</th><th>Price</th></th><th>Quantity</th><th>Payable</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart %}
            <input type="hidden" name="cart_id[]" value="{{item.cart_id}}">
            <input type="hidden" name="prod_id[]" value="{{item.cart.prod_id}}">
            <input type="hidden" name="price[]" value="{{item.cart_amt}}">
            <input type="hidden" name="quantity[]" value="{{item.cart_qty}}">

            <tr>
                <td>{{loop.index}}</td><td>{{item.cart.prod_name}}</td><td>₦ {{item.cart_amt}}</td><td>{{item.cart_qty}}</td><td style="width: 15%;">
                    ₦ {{item.cart_amt * item.cart_qty}}
                    <input class="form-control" type="hidden" name="payable[]" value="{{item.cart_amt * item.cart_qty}}">
                </td>
            </tr>
            {% endfor %}
            <tr>
                <td></td><td><h3>Total Amount Payable</h3></td><td></td><td></td><td><h3> ₦ {{ total }}</h3></td>
                <input class="form-control" type="hidden" name="total_payable" value="{{total}}">
            </tr>
        </tbody>
    </table>
    <div style='text-align: center;'>
        <button class="btn btn-outline-dark form-control" type="submit">Proceed To Make Payment</button>
    </div>
</form>

{% endblock %}